<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - BankSync</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/responsive.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Theme styles */
        :root {
            --bg-color: #f5f7fa;
            --text-color: #333;
            --card-bg: #ffffff;
            --sidebar-bg: linear-gradient(180deg, #1e3a8a, #2563eb);
        }
        
        .dark-theme {
            --bg-color: #0f172a;
            --text-color: #e2e8f0;
            --card-bg: #1e293b;
            --sidebar-bg: linear-gradient(180deg, #0f172a, #1e3a8a);
        }
        
        .dark-theme .card,
        .dark-theme .settings-container,
        .dark-theme .profile-card,
        .dark-theme .bank-card,
        .dark-theme .transactions-table-container,
        .dark-theme .transfer-form,
        .dark-theme .auth-form-container,
        .dark-theme .help-container {
            background-color: #1e293b;
            color: #e2e8f0;
        }
        
        .dark-theme .topbar {
            background-color: #1e293b;
            color: #e2e8f0;
        }
        
        .dark-theme .user-name {
            color: #e2e8f0;
        }
        
        .dark-theme .user-email {
            color: #94a3b8;
        }
        
        .dark-theme .page-header h1,
        .dark-theme .page-header p,
        .dark-theme .section-header h2,
        .dark-theme .card h3,
        .dark-theme .bank-name,
        .dark-theme .account-info h4,
        .dark-theme .transaction-details h4,
        .dark-theme .settings-section h2,
        .dark-theme .setting-group h3,
        .dark-theme .detail-section h3 {
            color: #e2e8f0;
        }
        
        .dark-theme .amount,
        .dark-theme .account-balance,
        .dark-theme .transaction-amount {
            color: #e2e8f0;
        }
        
        .dark-theme .negative {
            color: #f87171;
        }
        
        .dark-theme .positive {
            color: #60a5fa;
        }
        
        .dark-theme .transactions-table thead {
            background-color: #334155;
        }
        
        .dark-theme .transactions-table tbody tr:hover {
            background-color: #334155;
        }
        
        .dark-theme .form-group input,
        .dark-theme .form-group select {
            background-color: #334155;
            border-color: #475569;
            color: #e2e8f0;
        }
        
        .dark-theme .form-group input:focus,
        .dark-theme .form-group select:focus {
            border-color: #60a5fa;
        }
        
        .dark-theme .form-group label {
            color: #cbd5e1;
        }
        
        /* Dark theme buttons - FIXED with your colors */
        .dark-theme .btn.primary {
            background-color: #97B067; /* Sage Green */
            color: white;
            border: 1px solid #97B067;
        }
        
        .dark-theme .btn.secondary {
            background-color: #334155;
            color: #e2e8f0;
            border: 1px solid #475569;
        }
        
        .dark-theme .btn.danger {
            background-color: #898AC4; /* Lavender */
            color: white;
            border: 1px solid #898AC4;
        }
        
        .dark-theme .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .dark-theme .btn.primary:hover {
            background-color: #7d9a55; /* Darker Sage Green */
            border-color: #7d9a55;
        }
        
        .dark-theme .btn.danger:hover {
            background-color: #6f72b0; /* Darker Lavender */
            border-color: #6f72b0;
        }
        
        /* Additional dark theme fixes */
        .dark-theme .settings-nav {
            background: #1e293b;
            border-right: 1px solid #334155;
        }
        
        .dark-theme .settings-nav li {
            border-bottom: 1px solid #334155;
        }
        
        .dark-theme .settings-nav li.active a,
        .dark-theme .settings-nav a:hover {
            background: #27391C; /* Dark Green */
            color: #e2e8f0;
            border-left: 3px solid #97B067; /* Sage Green */
        }
        
        .dark-theme .toggle-setting {
            border-bottom: 1px solid #334155;
        }
        
        .dark-theme .toggle-setting:last-child {
            border-bottom: none;
        }
        
        .dark-theme .setting-group {
            border-bottom: 1px solid #334155;
        }
        
        .dark-theme .setting-group:last-child {
            border-bottom: none;
        }
        
        .dark-theme .switch {
            background-color: #334155;
        }
        
        .dark-theme input:checked + .slider {
            background-color: #97B067; /* Sage Green */
        }
        
        .dark-theme .theme-preview.light {
            background: linear-gradient(to right, #f8fafc 50%, white 50%);
        }
        
        .dark-theme .theme-preview.dark {
            background: linear-gradient(to right, #1e293b 50%, #0f172a 50%);
        }
        
        .dark-theme .theme-preview.auto {
            background: linear-gradient(to right, #f8fafc 33%, #1e293b 33%, #1e293b 66%, #0f172a 66%);
        }
        
        .dark-theme .theme-option.active {
            background: #27391C; /* Dark Green */
            border: 1px solid #97B067; /* Sage Green */
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
        }
        
        .settings-container {
            background: var(--card-bg);
        }
        
        /* Loading indicator */
        .loading {
            display: flex;
            justify-content: center;
            padding: 2rem;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #97B067;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        .dark-theme .loading-spinner {
            border: 4px solid #334155;
            border-top: 4px solid #97B067;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Error message styling */
        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 1rem;
            border-radius: 4px;
            margin: 1rem 0;
            border-left: 4px solid #c62828;
        }
        
        .dark-theme .error-message {
            background: #422;
            color: #ff8a8a;
            border-left: 4px solid #ff5252;
        }
        
        /* Success message styling */
        .success-message {
            background: #e8f5e9;
            color: #2e7d32;
            padding: 1rem;
            border-radius: 4px;
            margin: 1rem 0;
            border-left: 4px solid #4caf50;
        }
        
        .dark-theme .success-message {
            background: #1b5e20;
            color: #a5d6a7;
            border-left: 4px solid #4caf50;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <h2>BankSync</h2>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            
            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="dashboard.html">
                            <i class="fas fa-home"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="my-banks.html">
                            <i class="fas fa-university"></i>
                            <span>My Banks</span>
                        </a>
                    </li>
                    <li>
                        <a href="transaction-history.html">
                            <i class="fas fa-exchange-alt"></i>
                            <span>Transactions</span>
                        </a>
                    </li>
                    <li>
                        <a href="payment-transfer.html">
                            <i class="fas fa-paper-plane"></i>
                            <span>Transfer</span>
                        </a>
                    </li>
                    <li>
                        <a href="connect-bank.html">
                            <i class="fas fa-link"></i>
                            <span>Connect Bank</span>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="profile.html">
                            <i class="fas fa-user"></i>
                            <span>Profile</span>
                        </a>
                    </li>
                    <li>
                        <a href="settings.html" class="active">
                            <i class="fas fa-cog"></i>
                            <span>Settings</span>
                        </a>
                    </li>
                    <li>
                        <a href="help-support.html">
                            <i class="fas fa-question-circle"></i>
                            <span>Help & Support</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" id="logout-link">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Logout</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="topbar">
                <div class="user-profile">
                    <div class="user-info">
                        <span class="user-name"></span>
                        <span class="user-email"></span>
                    </div>
                    <div class="user-avatar">
                        <img id="avatar-img" alt="User">
                    </div>
                </div>
            </header>

            <div class="content">
                <div class="page-header">
                    <h1>Settings</h1>
                    <p>Manage your account preferences</p>
                </div>

                <div class="loading" id="loadingIndicator">
                    <div class="loading-spinner"></div>
                </div>

                <div class="settings-container" id="settingsContainer" style="display: none;">
                    <div class="settings-nav">
                        <ul>
                            <li class="active"><a href="#account">Account</a></li>
                            <li><a href="#notifications">Notifications</a></li>
                            <li><a href="#security">Security</a></li>
                            <li><a href="#privacy">Privacy</a></li>
                            <li><a href="#appearance">Appearance</a></li>
                        </ul>
                    </div>
                    
                    <div class="settings-content">
                        <div id="account" class="settings-section active">
                            <h2>Account Settings</h2>
                            
                            <div class="setting-group">
                                <h3>Profile Information</h3>
                                <div class="form-group">
                                    <label for="firstName">First Name</label>
                                    <input type="text" id="firstName">
                                </div>
                                
                                <div class="form-group">
                                    <label for="lastName">Last Name</label>
                                    <input type="text" id="lastName">
                                </div>
                                
                                <div class="form-group">
                                    <label for="email">Email Address</label>
                                    <input type="email" id="email">
                                </div>
                                
                                <div class="form-group">
                                    <label for="phone">Phone Number</label>
                                    <input type="tel" id="phone">
                                </div>

                                <div class="form-group">
                                    <label for="dob">Date of Birth</label>
                                    <input type="date" id="dob">
                                </div>

                                <div class="form-group">
                                    <label for="address">Address</label>
                                    <textarea id="address" rows="3"></textarea>
                                </div>
                            </div>
                            
                            <div class="setting-group">
                                <h3>Language & Region</h3>
                                <div class="form-group">
                                    <label for="language">Language</label>
                                    <select id="language">
                                        <option>English</option>
                                        <option>Bangla</option>
                                        <option>Spanish</option>
                                        <option>French</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="timezone">Timezone</label>
                                    <select id="timezone">
                                        <option>(GMT+06:00) Bangladesh Time</option>
                                        <option>(GMT-05:00) Eastern Time</option>
                                        <option>(GMT-06:00) Central Time</option>
                                        <option>(GMT-07:00) Mountain Time</option>
                                    </select>
                                </div>
                            </div>
                            
                            <button class="btn primary" id="saveProfileBtn">Save Changes</button>
                        </div>
                        
                        <div id="notifications" class="settings-section">
                            <h2>Notification Settings</h2>
                            
                            <div class="setting-group">
                                <h3>Email Notifications</h3>
                                <div class="toggle-setting">
                                    <span>Transaction Alerts</span>
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="toggle-setting">
                                    <span>Budget Warnings</span>
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="toggle-setting">
                                    <span>Monthly Reports</span>
                                    <label class="switch">
                                        <input type="checkbox">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="toggle-setting">
                                    <span>Security Alerts</span>
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="setting-group">
                                <h3>Push Notifications</h3>
                                <div class="toggle-setting">
                                    <span>Transaction Alerts</span>
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="toggle-setting">
                                    <span>Budget Warnings</span>
                                    <label class="switch">
                                        <input type="checkbox">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="toggle-setting">
                                    <span>Promotional Offers</span>
                                    <label class="switch">
                                        <input type="checkbox">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <button class="btn primary">Save Changes</button>
                        </div>
                        
                        <div id="security" class="settings-section">
                            <h2>Security Settings</h2>
                            
                            <div class="setting-group">
                                <h3>Authentication</h3>
                                <div class="toggle-setting">
                                    <span>Two-Factor Authentication</span>
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="form-group">
                                    <label for="recoveryEmail">Recovery Email</label>
                                    <input type="email" id="recoveryEmail">
                                </div>
                            </div>
                            
                            <div class="setting-group">
                                <h3>Login Security</h3>
                                <div class="toggle-setting">
                                    <span>Remember Devices</span>
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="toggle-setting">
                                    <span>Login Notifications</span>
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="setting-group">
                                <h3>Password</h3>
                                <button class="btn secondary">Change Password</button>
                            </div>
                            
                            <button class="btn primary">Save Changes</button>
                        </div>
                        
                        <div id="privacy" class="settings-section">
                            <h2>Privacy Settings</h2>
                            
                            <div class="setting-group">
                                <h3>Data Sharing</h3>
                                <div class="toggle-setting">
                                    <span>Share Data with Partners</span>
                                    <label class="switch">
                                        <input type="checkbox">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="toggle-setting">
                                    <span>Personalized Ads</span>
                                    <label class="switch">
                                        <input type="checkbox">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="setting-group">
                                <h3>Data Management</h3>
                                <button class="btn secondary">Download My Data</button>
                                <button class="btn danger">Delete My Data</button>
                            </div>
                            
                            <button class="btn primary">Save Changes</button>
                        </div>
                        
                        <div id="appearance" class="settings-section">
                            <h2>Appearance Settings</h2>
                            
                            <div class="setting-group">
                                <h3>Theme</h3>
                                <div class="theme-options">
                                    <div class="theme-option" data-theme="light">
                                        <div class="theme-preview light"></div>
                                        <span>Light</span>
                                    </div>
                                    <div class="theme-option" data-theme="dark">
                                        <div class="theme-preview dark"></div>
                                        <span>Dark</span>
                                    </div>
                                    <div class="theme-option" data-theme="system">
                                        <div class="theme-preview auto"></div>
                                        <span>System</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="setting-group">
                                <h3>Layout</h3>
                                <div class="toggle-setting">
                                    <span>Compact View</span>
                                    <label class="switch">
                                        <input type="checkbox">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <button class="btn primary">Save Changes</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="js/main.js"></script>
    <script>
        // Main functionality for the Settings page
        document.addEventListener('DOMContentLoaded', function() {
            const token = localStorage.getItem('token');
            const user = JSON.parse(localStorage.getItem('user'));
            
            if (!token || !user) {
                window.location.href = 'index.html';
                return;
            }

            // Update topbar with user info
            document.querySelector('.user-name').textContent = `${user.firstName} ${user.lastName}`;
            document.querySelector('.user-email').textContent = user.email;
            
            // Set avatar image
            const avatarImg = document.getElementById('avatar-img');
            const avatarUrl = `https://ui-avatars.com/api/?name=${encodeURIComponent(user.firstName + ' ' + user.lastName)}&background=97B067&color=fff`;
            avatarImg.src = avatarUrl;
            avatarImg.alt = `${user.firstName} ${user.lastName}`;

            // Apply saved theme
            const savedTheme = localStorage.getItem('theme');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-theme');
            } else if (savedTheme === 'system' && systemPrefersDark) {
                document.body.classList.add('dark-theme');
            }

            // Load user profile data
            loadProfileData();

            // Settings navigation
            const navLinks = document.querySelectorAll('.settings-nav a');
            const sections = document.querySelectorAll('.settings-section');
            
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all links and sections
                    navLinks.forEach(l => l.parentElement.classList.remove('active'));
                    sections.forEach(s => s.classList.remove('active'));
                    
                    // Add active class to clicked link
                    this.parentElement.classList.add('active');
                    
                    // Show corresponding section
                    const target = this.getAttribute('href').substring(1);
                    document.getElementById(target).classList.add('active');
                });
            });
            
            // Theme switching functionality
            const themeOptions = document.querySelectorAll('.theme-option');
            const body = document.body;
            
            // Initialize theme selection based on saved preference
            if (savedTheme) {
                // Find and activate the correct theme option
                themeOptions.forEach(option => {
                    if (option.getAttribute('data-theme') === savedTheme) {
                        option.classList.add('active');
                    }
                });
            } else if (systemPrefersDark) {
                // Find and activate system theme option
                themeOptions.forEach(option => {
                    if (option.getAttribute('data-theme') === 'system') {
                        option.classList.add('active');
                    }
                });
            } else {
                // Default to light theme
                themeOptions.forEach(option => {
                    if (option.getAttribute('data-theme') === 'light') {
                        option.classList.add('active');
                    }
                });
            }
            
            themeOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove active class from all options
                    themeOptions.forEach(opt => opt.classList.remove('active'));
                    
                    // Add active class to clicked option
                    this.classList.add('active');
                    
                    // Apply theme
                    const theme = this.getAttribute('data-theme');
                    applyTheme(theme);
                    
                    // Save preference
                    localStorage.setItem('theme', theme);
                });
            });
            
            function applyTheme(theme) {
                if (theme === 'dark') {
                    body.classList.add('dark-theme');
                } else if (theme === 'light') {
                    body.classList.remove('dark-theme');
                } else if (theme === 'system') {
                    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                        body.classList.add('dark-theme');
                    } else {
                        body.classList.remove('dark-theme');
                    }
                }
            }
            
            // Listen for system theme changes
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                const savedTheme = localStorage.getItem('theme');
                if (!savedTheme || savedTheme === 'system') {
                    if (e.matches) {
                        body.classList.add('dark-theme');
                    } else {
                        body.classList.remove('dark-theme');
                    }
                }
            });

            // Save profile changes
            document.getElementById('saveProfileBtn').addEventListener('click', saveProfileChanges);

            // Logout functionality
            document.getElementById('logout-link').addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('token');
                localStorage.removeItem('user');
                window.location.href = 'index.html';
            });
        });

        async function loadProfileData() {
            const token = localStorage.getItem('token');
            try {
                const response = await fetch('/api/profile', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                
                const userData = await response.json();
                
                // Hide loading indicator and show settings
                document.getElementById('loadingIndicator').style.display = 'none';
                document.getElementById('settingsContainer').style.display = 'flex';
                
                if (userData.error) {
                    console.error('Profile error:', userData.error);
                    showError('Failed to load profile: ' + userData.error);
                    return;
                }
                
                // Populate form fields with user data
                document.getElementById('firstName').value = userData.firstName || '';
                document.getElementById('lastName').value = userData.lastName || '';
                document.getElementById('email').value = userData.email || '';
                document.getElementById('phone').value = userData.phone || '';
                document.getElementById('dob').value = userData.dob || '';
                document.getElementById('address').value = userData.address || '';
                document.getElementById('recoveryEmail').value = userData.email || '';
                
            } catch (err) {
                console.error('Error loading profile:', err);
                document.getElementById('loadingIndicator').style.display = 'none';
                showError('Error loading profile data. Please try again.');
            }
        }

        async function saveProfileChanges() {
            const token = localStorage.getItem('token');
            const saveBtn = document.getElementById('saveProfileBtn');
            const originalText = saveBtn.textContent;
            
            try {
                saveBtn.disabled = true;
                saveBtn.textContent = 'Saving...';
                
                const updatedData = {
                    firstName: document.getElementById('firstName').value,
                    lastName: document.getElementById('lastName').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    dob: document.getElementById('dob').value,
                    address: document.getElementById('address').value
                };
                
                const response = await fetch('/api/profile', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(updatedData)
                });
                
                const result = await response.json();
                
                if (!response.ok) {
                    throw new Error(result.error || 'Failed to update profile');
                }
                
                // Update localStorage user data
                const user = JSON.parse(localStorage.getItem('user'));
                user.firstName = updatedData.firstName;
                user.lastName = updatedData.lastName;
                user.email = updatedData.email;
                user.phone = updatedData.phone;
                localStorage.setItem('user', JSON.stringify(user));
                
                // Update topbar
                document.querySelector('.user-name').textContent = `${user.firstName} ${user.lastName}`;
                document.querySelector('.user-email').textContent = user.email;
                
                // Update avatar
                const avatarImg = document.getElementById('avatar-img');
                const avatarUrl = `https://ui-avatars.com/api/?name=${encodeURIComponent(user.firstName + ' ' + user.lastName)}&background=97B067&color=fff`;
                avatarImg.src = avatarUrl;
                
                showSuccess('Profile updated successfully!');
                
            } catch (err) {
                console.error('Error saving profile:', err);
                showError('Error saving profile: ' + err.message);
            } finally {
                saveBtn.disabled = false;
                saveBtn.textContent = originalText;
            }
        }

        function showError(message) {
            // Remove any existing error messages
            const existingErrors = document.querySelectorAll('.error-message');
            existingErrors.forEach(error => error.remove());
            
            // Create error message element
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.textContent = message;
            
            // Insert after page header
            const pageHeader = document.querySelector('.page-header');
            pageHeader.parentNode.insertBefore(errorDiv, pageHeader.nextSibling);
            
            // Remove after 5 seconds
            setTimeout(() => {
                errorDiv.remove();
            }, 5000);
        }

        function showSuccess(message) {
            // Remove any existing success messages
            const existingSuccess = document.querySelectorAll('.success-message');
            existingSuccess.forEach(success => success.remove());
            
            // Create success message element
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.textContent = message;
            
            // Insert after page header
            const pageHeader = document.querySelector('.page-header');
            pageHeader.parentNode.insertBefore(successDiv, pageHeader.nextSibling);
            
            // Remove after 5 seconds
            setTimeout(() => {
                successDiv.remove();
            }, 5000);
        }
    </script>
</body>
</html>